# 重构树

我们按照克鲁斯卡尔建立最小生成树的过程，最后产生的二叉树为重构树

这棵树有很多奇妙的性质

1. **它是一个二叉堆。**
2. **若边权升序，则它是一个大根堆**
3. **任意两点路径边权最大值为$Kruskal$重构树上$LCA$的点权。**

有了这个东西，我们就可以维护

1. 普通图上，任意两点之间路径上的最大边权的最小值。建完最小生成树后，任意两点之间的最大边权必须大于等于最小生成树上的两点间的最大边权，否则我们就找到一条路径，上面边权最大的边去替换原先的最大边，这与最小生成树的定义不符。于是我们有**任意两点间的最大边权的最小值等于最小生成树上的两点最短路径上的最大值**，即**也等于重构树上这两点的$LCA$的权值**
2. 树上，任意两点的最大距离等于重构树上的两点的$LCA$