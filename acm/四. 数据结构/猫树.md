## 猫树
快速查询区间信息和

要点

1. 建树时维护$(l,mid]$的后缀和以及$(mid,r]$的前缀和

2. 预处理$log$数组

3. 将序列补全至$2$的幂次

4. $lcp(x,y)=lca(x,y)=x>>log[x^y]$

   ```c++
   template<class Type>
   class FenwickTree
   {
   public:
   	~FenwickTree(void)
   	{
   		for (int i = 0; i <= n; ++i)
   		{
   			delete[] tree[i];
   		}
   		delete[] tree;
   	}
   	Type ask(int x, int y)
   	{
   		Type res = Type();
   		while (x)
   		{
   			int tempy = y;
   			while (tempy)
   			{
   				res += tree[x][tempy];
   				tempy -= lowbit(tempy);
   			}
   			x -= lowbit(x);
   		}
   		return res;
   	}
   	void init(int n, int m)
   	{
   		this->n = n;
   		this->m = m;
   		tree = new Type * [n + 1];
   		for (int i = 0; i <= n; ++i)
   		{
   			tree[i] = new Type[m + 1];
   			for (int j = 0; j <= m; ++j)
   			{
   				tree[i][j] = Type();
   			}
   		}
   	}
   	void add(int x, int y, Type d)
   	{
   		while (x <= n)
   		{
   			int tempy = y;
   			while (tempy <= m)
   			{
   				tree[x][tempy] += d;
   				tempy += lowbit(tempy);
   			}
   			x += lowbit(x);
   		}
   	}
   	Type ask(int x1, int y1, int x2, int y2)
   	{
   		return ask(x2, y2) - ask(x1 - 1, y2) - ask(x2, y1 - 1) + ask(x1 - 1, y1 - 1);
   	}
   private:
   	int n = 0, m = 0;
   	Type** tree = NULL;
   	/*====================*/
   	int lowbit(int x) { return x & (-x); }
   };
   ```
   
   
   
   

