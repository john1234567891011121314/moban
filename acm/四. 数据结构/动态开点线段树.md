## 动态开点线段树
```c++
int n, cnt, root;//root表示根节点，cnt表示节点个数；
int val[N << 1], ls[N << 1], rs[N << 1];
void update(int& p, int l,int r,int x,int f)
{
    if(!p) p = ++cnt;
    if(l == r)
    {
        sum[p] += f;
        return ;
	}
    int mid = (l + r) >> 1;
    if(x <= mid) update(ls[p], l, mid. x, f);
    else update(ls[p], l, mid. x, f);
    sum[p] = sum[ls[p]] + sum[rs[p]];
}
int query(int p, int s, int t, int l, int r) {
    if (!p) return 0;  // 如果结点为空，返回 0
    if (s >= l && t <= r) return sum[p];
    int m = s + ((t - s) >> 1), ans = 0;
    if (l <= m) ans += query(ls[p], s, m, l, r);
    if (r > m) ans += query(rs[p], m + 1, t, l, r);
    return ans;
}
```

