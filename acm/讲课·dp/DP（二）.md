概率正推，期望逆推

一般概率期望经常放一起，这里也放一起讲。

大家可能不太熟悉的是贝叶斯公式，这个公式实质是条件概率和全概率公式的混合。



# 概率dp

## Bag of mice

留两分钟思考一下。

因为我们其实只考虑公主的胜率，不需要考虑龙的胜率。因此我们可以考虑$dp[i][j]$表示回合开始前，轮到公主时，有$i$只白鼠和$j$只黑鼠的情况下，能够获胜的概率。那么我们要求的就是$dp[w][b]$。

## Jon and Orbs

留两分钟看题。

这道题首先你能观察到二分性质，天数越多，那么概率就越高。

那么问题就转换为了第$i$天产生$k$种龙晶的概率，然后我们就可以设出状态$dp[i][j]$表示第$i$天产生$j$个龙晶的概率。



有后效性

# 期望dp

**期望的线性性**是我们考虑期望$dp$时相当重要的点。另外就是全期望公式，和全概率差不多，做的时候想办法套一下公式就行。这个公式直观理解的话，比如这里有一份工作，要么甲做，要么乙做，然后你就可以写出总的期望，也就是甲做的概率乘以甲做完的期望时间，加上乙做的概率乘以乙做完的期望时间。

## Collecting Bugs

留两分钟看题

你会发现这个东西其实和刚才的龙晶没有什么区别，我们的dp状态也大差不差，但是这次我们就不用维护天数，$dp[i][j]$表示发现$i$个不同的bug，同时属于$j$个子系统的期望天数。当然因为我们期望dp需要倒着来，因此这个状态就设为到达我们想要状态的期望天数。

为什么我们要倒着来呢，以这道题为例，这里就有可能状态不发生变化，但是我们在推导时没有把这个东西考虑进去，$[i][j]$状态经过一次变化之后，还是这个状态。如果我们倒着来就不会有这个问题。（画图）

## Chiitoitsu



留两分钟看题。





牛客22年多校

随机游走

# 子集dp