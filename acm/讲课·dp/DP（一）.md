# DP（一）

在思考dp问题时，最麻烦的是设计dp状态，接下来将挑几道模板题说明一下在设计这些状态时，可能的思考方向，希望这有助于你们形成自己解决dp的方法。

## 区间dp

首先我们来讲讲区间dp，区间dp往往能够将问题转换为两两合并的形式。然后在转移的时候枚举分界点转移，从而得到更大规模问题的最优解。

一般我们都用dp【l】【r】来表示这个区间的状态，有时候可能多加几维。

### 板题

#### 校oj 1181 石子合并

我们首先从区间dp的经典模板题开始。

预留几分钟思考时间，可以补充一下例子。

在实际写的时候，我们可以将区间长度作为第一层循环。这样我们在计算大区间的答案之前，就可以把小区间的答案求出来了。

#### 校oj 3824 环形石子合并

破环成链

#### hdu7277[Mr. Liang play Card Game](https://vjudge.net.cn/contest/642626#problem/C)

一场杭电多校的题。

预留几分钟思考时间

回顾一下石子合并的做法，我们会发现石子合并我们只需要考虑合并完之后最小的代价就行了。

但是这一题不一样，这一题还需要考虑牌的类型和牌的等级，注意到这里这两个数都不太大，因此考虑将这两个也加入到状态里。

因此设$dp[l][r][type][lv]$，表示这个区间$[l,r]$最后剩下的牌的类型为$type$，等级为$lv$的时候的最大值，特别的，我们可以设$dp[l][r][0][0]$，表示这段区间所有牌打出去所能获得的最大贡献。

然后进行分类讨论就可以了。

## 状压dp

状压dp一般用来解决np问题，也就是只能考虑枚举每一个子集的情况。

### 板题

#### TSP问题 吃奶酪

状压dp最经典的用法就是解决这类没有办法用贪心或者什么办法解决的题目。

针对这道题目，首先我得知道我走过了那些点，其次我得知道我现在在那个位置，然后我们就可以根据这两个状态设计dp进行转移。

（适当画图说明）

然后这里，我们可以做一个扩展，如果我们以后需要在有向无环图上求一个点能否到达其他点，我们有什么办法吗。这里不能使用并查集，和这里的状态类似，可以考虑使用二进制数来表示可达性。

#### 看守

这道题虽然不是传统的状压，但是因为也体现了状压的思想，因此也放出来给大家想一想。

叙述曼哈顿距离。

预留思考时间。

首先大家肯定都会一个$n^2k$的算法，就我直接可以枚举两个点，但是这里n还是比较大的，这样不太行。

但是这里有一个常见套路就是，我们可以把绝对值拆开，拆开之后就得到了一个max，然后对max处理。

转换成max之后，我们就有了比较好的性质，比如可以满足分配律，然后我们就可以把这个原先的绝对值转换为一堆东西求max的过程。

最后这题就结束了。

