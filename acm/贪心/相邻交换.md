## 相邻交换

如果我们定义一个$\leq$ 关系，满足交换律和传递性，并且任取两个相邻元素进行交换后，可以证明

对整体影响与$\leq$的影响一致，那么就可以通过排序来得出其中一个最优解。

## 应用

### 字符串拼接

给出 $n$ 个包含小写字符的字符串 $s_1, · · · , s_n$。找到一个 n 阶排列 p，将$ s_{p1} , s_{p2} , · · · , s_{pn}$顺 序拼接得到 S，使 S 的字典序最小。

我们只需定义：

对于字符串 s, t，s ≤ t 当且 仅当 s + t 的字典序小于等于 t + s 的字典序

## 存储空间

有$ n$ 块硬盘，需要对这些硬盘进行格式化。第$ i$ 块硬盘在格式化前容量为 $a_i$，格式化后 容量为$ b_i$。初始时每块硬盘中都装满了数据，但在格式化一块硬盘的过程中，需要将这块硬 盘上的所有数据移动到其他硬盘或者存储空间中。数据可以进行任意转移，任意分割。求 最少需要多少的额外存储空间，才能格式化所有的硬盘并保留数据。

设第 $i$ 次格式化的硬盘为第$ p_i$块。则在格式化第 $p_i$ 块硬盘前，需要的额外空间为 $max(0, ( ∑^i_{ j=1} b_{pj} ) − ( ∑^i_{ j=1} a_{pj }))$。因此问题相当于给定 $n$ 对 $(ai , bi)$，找到它们的一个排列，最 大化 $min^n_{i=1} {( ∑^{i−1}_ {j=1} b_i) − ( ∑^i_{ j=1} a_j)}$。记 $F({(a_1, b_1), · · · , (a_n, b_n)}) = − min^n _{i=1} {( ∑^{i−1} _{j=1} b_j) − ( ∑^i_{ j=1} a_j)}$， 即可看成最小化 F。

定义$ x ≤ y$ 当且仅当 $F({x, y}) ≤ F({y, x})$，对于两个元素 $(a_1, b_1), (a_2, b_2)， (a_1, b_1) ≤ (a_2, b_2)$ 当且仅当 $min\{−a_1, b_1 − a_1 − a_2\} ≥ min\{−a_2, b_2 − a_1 − a_2\}$。

## 放石子

有 $n$ 个人，每个人手上有 $a_i$ 个石头，身高为 $b_i$，

如果轮到第 $i$ 个人放石头的时候，石头堆里的石头个数小于等于 $a_i$，这个人就会放 $b_i$ 个石头进去，否则摆烂.

我们只需定义：

对于 $i, j$，$x_i \leq x_j$ 当且 仅当 $a_i + b_i \leq a_j + b_j$

此时如果两个都放，那么$i$在$j$之前一定要满足上述关系，我们就可以通过计算子序列来解决。